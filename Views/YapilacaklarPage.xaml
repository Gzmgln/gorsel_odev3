<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Odev3_Uygulama.Views.YapilacaklarPage"
             Title="Yapılacaklar">

    <Grid RowDefinitions="Auto,*">
        <Button Text="Yeni Görev Ekle (+)" 
                Clicked="OnEkleClicked" 
                Margin="10" 
                BackgroundColor="#512BD4"
                TextColor="White"
                HorizontalOptions="End"/>

        <CollectionView x:Name="lstTodo" Grid.Row="1" Margin="5">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame Margin="5" 
                           Padding="10" 
                           HasShadow="True"
                           BorderColor="{AppThemeBinding Light=LightGray, Dark=Transparent}"
                           BackgroundColor="{AppThemeBinding Light=White, Dark=#212121}">

                        <Grid ColumnDefinitions="Auto,*,Auto">

                            <CheckBox IsChecked="{Binding YapildiMi}" 
                                      VerticalOptions="Center" 
                                      CheckedChanged="OnCheckedChanged"
                                      BindingContext="{Binding .}"
                                      Color="#512BD4"/>

                            <StackLayout Grid.Column="1" VerticalOptions="Center" Margin="10,0">

                                <Label Text="{Binding Baslik}" 
                                       FontAttributes="Bold" 
                                       FontSize="16" 
                                       TextColor="{AppThemeBinding Light=Black, Dark=White}"/>

                                <Label Text="{Binding Detay}" 
                                       FontSize="12" 
                                       LineBreakMode="TailTruncation"
                                       TextColor="{AppThemeBinding Light=Gray, Dark=LightGray}"/>

                                <HorizontalStackLayout Spacing="5">
                                    <Label Text="{Binding Tarih}" TextColor="#512BD4" FontSize="11"/>
                                    <Label Text="-" TextColor="#512BD4" FontSize="11"/>
                                    <Label Text="{Binding Saat}" TextColor="#512BD4" FontSize="11"/>
                                </HorizontalStackLayout>
                            </StackLayout>

                            <HorizontalStackLayout Grid.Column="2" Spacing="5" VerticalOptions="Center">
                                <Button Text="✎" 
                                        TextColor="White" 
                                        BackgroundColor="#2196F3" 
                                        WidthRequest="40" 
                                        HeightRequest="40"
                                        Padding="0"
                                        Clicked="OnDuzenleClicked"
                                        CommandParameter="{Binding .}"/>

                                <Button Text="X" 
                                        TextColor="White" 
                                        BackgroundColor="Red" 
                                        WidthRequest="40" 
                                        HeightRequest="40" 
                                        Padding="0"
                                        Clicked="OnSilClicked"
                                        CommandParameter="{Binding .}"/>
                            </HorizontalStackLayout>

                        </Grid>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </Grid>
</ContentPage>